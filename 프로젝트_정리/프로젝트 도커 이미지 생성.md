# 프로젝트 도커라이징

각각 서비스파일로 들어가서 해당 명령어를 입력하여 도커 이미지 파일을 생성한다.

[참고사이트](https://spring.io/guides/gs/spring-boot-docker/)

#### 0. Gradle Project Build

```shell
./gradlew build
```



#### 1. Dockerfile 도커파일 생성

```dockerfile
#Account-service/Dockerfile
FROM openjdk:8-jdk-alpine
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java","-jar","/app.jar"]
```

도커파일생성 후 프로젝트 제일 상단에 위치하게 한다. 

#### 2. Docker Build

Build 명령어를 사용하여 각각의 서비스에 대한 **도커 이미지**를 생성한다.

```dockerfile
# Fron-End
# planit-front
docker build -t shoon2430/planit-front:v1 .

# Back-End
# Account-service
docker build --build-arg JAR_FILE=build/libs/*.jar -t shoon2430/account-service:v1 .
# Group-service
docker build --build-arg JAR_FILE=build/libs/*.jar -t shoon2430/group-service:v1 .
# Todo-service
docker build --build-arg JAR_FILE=build/libs/*.jar -t shoon2430/todo-service:v1 .
# Auth-service
docker build --build-arg JAR_FILE=build/libs/*.jar -t shoon2430/auth-service:v1 .
# Point-service
docker build --build-arg JAR_FILE=build/libs/*.jar -t shoon2430/point-service:v1 .
```



#### 3. Docker Push

push 명령어를 사용하여 **Docker Hub**에 만들어진 이미지 파일을 올린다.

```dockerfile
Docker login
```

>  이미지를 올리기전 DockerHub에 로그인이 되어있는지 확인한다.

```dockerfile
docker push shoon2430/planit-front:v1
docker push shoon2430/account-service:v1
docker push shoon2430/group-service:v1
docker push shoon2430/todo-service:v1
docker push shoon2430/auth-service:v1
docker push shoon2430/point-service:v1
```

도커컨테이너 실행

```
docker run -d --name account-service -p 9005:9005 shoo2430/account-service:v1
```

